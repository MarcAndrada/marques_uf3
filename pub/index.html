<!DOCTYPE html>

<html>
<head>
<meta charset=utf-8"/>
<title> GOTY Phaser</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/phaser/3.52.0/phaser.min.js"></script> 

</head>
<body>
	<h1>Fantastico juego de JS/Phaser</h1>
<script>
const scene_w = 640;
const scene_h = 480;

const config = {
	type: Phaser.AUTO,
	width: scene_w,
	height: scene_h,
	pixelArt: true,
	scene: {
		preload: preload,
		create: create,
		update: update
	}
};

let game = new Phaser.Game(config);
let bg;
let car = [];

let car_left_top_x = 0;
let car_left_top_y = scene_h/2 + 52;
let car_left_bottom_x = 0;
let car_left_bottom_y = scene_h/2 + 136;

let car_right_top_x = scene_w+128;
let car_right_top_y = scene_h/2 - 52;
let car_right_bottom_x = scene_w+128;
let car_right_bottom_y = scene_h/2 - 136;


let player;
let player_init_x = scene_w/2;
let player_init_y = scene_h-32;


function preload ()
{
this.load.image("background","road.jpg");
this.load.image("car1","PNG/Cars/ambulance.png");
this.load.image("car2","PNG/Cars/police.png");
this.load.image("car3","PNG/Cars/sedan.png");
this.load.image("car4","PNG/Cars/trucktank.png");
this.load.image("car5","PNG/Cars/trucktank.png");
this.load.image("car6","PNG/Cars/trucktank.png");
this.load.image("character","PNG/Characters/man.png");

}

function create ()
{

 bg = this.add.image(scene_w/2,scene_h/2, "background");
 car.push(this.add.image(car_left_top_x,car_left_top_y,"car1"));
 car.push(this.add.image(car_left_bottom_x,car_left_bottom_y,"car2"));

 car.push(this.add.image(car_right_top_x,car_right_top_y,"car3"));
 car.push(this.add.image(car_right_bottom_x,car_right_bottom_y,"car4"));



 player = this.add.image(player_init_x,player_init_y, "character");

player.setScale(4);
car[0].setScale(4);
car[1].setScale(4);
car[2].setScale(4);
car[2].flipX = true;
car[3].setScale(4);
car[3].flipX = true;

bg.setScale(2);

	left_key = this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.LEFT);
	right_key = this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.RIGHT);
	up_key = this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.UP);
	down_key = this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.DOWN);
}

function update () 
{
	if (left_key.isDown){
	player.x--;
	}else if(right_key.isDown){
	player.x++;
	}

	if (up_key.isDown){
	player.y--;
	}else if(down_key.isDown){
	player.y++;
	}
	car[0].x+= 8;
	car[1].x+= 8;
	car[2].x-= 8;
	car[3].x-= 8;

}
</script>

</body>
</html>
